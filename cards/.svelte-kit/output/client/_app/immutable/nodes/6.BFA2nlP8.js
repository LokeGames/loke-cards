import"../chunks/DsnmJJEf.js";import"../chunks/C5HDdxh5.js";import{a3 as C,a4 as D,Z as A,a5 as V,o as q,E as u,a6 as M,p as N,f as P,s as f,b as W,g as d,a as k,c as Z,e as i,m as b,d as _,t as j,a7 as z,r as p,n as T}from"../chunks/B8En_kGa.js";import{i as F}from"../chunks/AZkGX8EF.js";import{a as G}from"../chunks/DY7ZBqxn.js";import{b as H}from"../chunks/DtElN43D.js";import"../chunks/Ci-gc5A9.js";import{B as J}from"../chunks/y5aKIn30.js";import{B}from"../chunks/DS5jXhIv.js";function K(e,s,c=s){var l=new WeakSet;C(e,"input",async t=>{var r=t?e.defaultValue:e.value;if(r=g(e)?y(r):r,c(r),u!==null&&l.add(u),await D(),r!==(r=s())){var m=e.selectionStart,o=e.selectionEnd,v=e.value.length;if(e.value=r??"",o!==null){var n=e.value.length;m===o&&o===v&&n>v?(e.selectionStart=n,e.selectionEnd=n):(e.selectionStart=m,e.selectionEnd=Math.min(o,n))}}}),(q&&e.defaultValue!==e.value||A(s)==null&&e.value)&&(c(g(e)?y(e.value):e.value),u!==null&&l.add(u)),V(()=>{var t=s();if(e===document.activeElement){var r=M??u;if(l.has(r))return}g(e)&&t===y(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function g(e){var s=e.type;return s==="number"||s==="range"}function y(e){return e===""?null:+e}var L=P('<h2 class="text-xl font-semibold mb-3">New Scene</h2> <div class="max-w-xl space-y-3"><!> <!> <div><label for="sceneText" class="block text-sm font-medium mb-1">Scene Text</label> <textarea id="sceneText" class="w-full rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 p-2" rows="6"></textarea></div> <div class="flex gap-2"><!> <a href="/scenes" class="px-3 py-2 rounded border">Cancel</a></div></div>',1);function te(e,s){N(s,!1);let c=b(""),l=b("chapter01"),t=b(""),r=b("");async function m(){i(r,"");const a=d(c).trim();if(!a){i(r,"Scene ID is required");return}const x=Date.now();await H({id:a,sceneId:a,chapter:d(l),sceneText:d(t),choices:[],stateChanges:[],createdAt:x,updatedAt:x}),G("Scene created",{type:"success"}),window.location.href="/scenes"}F();var o=L(),v=f(W(o),2),n=_(v);B(n,{id:"scene-id",label:"Scene ID",get error(){return d(r)},get value(){return d(c)},set value(a){i(c,a)},$$events:{update:a=>i(c,a.detail)},$$legacy:!0});var $=f(n,2);B($,{id:"chapter",label:"Chapter",get value(){return d(l)},set value(a){i(l,a)},$$events:{update:a=>i(l,String(a.detail))},$$legacy:!0});var h=f($,2),S=f(_(h),2);z(S),p(h);var w=f(h,2),E=_(w);J(E,{variant:"primary",$$events:{click:m},children:(a,x)=>{T();var I=j("Create");k(a,I)},$$slots:{default:!0}}),T(2),p(w),p(v),K(S,()=>d(t),a=>i(t,a)),k(e,o),Z()}export{te as component};
