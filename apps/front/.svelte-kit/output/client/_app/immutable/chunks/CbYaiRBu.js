import"./DsnmJJEf.js";import"./BnfXkLE3.js";import{o as Z,e as $,s as j}from"./CAKmdX18.js";import{p as tt,f as l,g as e,a as i,c as et,s as d,e as s,d as o,m as k,n as at,r,t as T,ai as rt,b as st,u as M}from"./yF9IpEO4.js";import{i as w}from"./SV0_QZCG.js";import{e as it,i as ot}from"./BW16Smnj.js";import{r as lt}from"./4O88iP2y.js";import{b as nt}from"./jNOg69iZ.js";import{i as pt}from"./CiABMiT9.js";import{p as dt}from"./oaR_oenP.js";import{w as ct}from"./CybAjIvC.js";function ft(D){return function(...c){var u=c[0];return u.preventDefault(),D?.apply(this,c)}}var mt=l('<p class="text-sm text-green-600 dark:text-green-400" data-testid="chapter-status"> </p>'),ut=l("<p>Indlæser kapitler…</p>"),vt=l('<p class="text-sm text-gray-600 dark:text-gray-300">Ingen kapitler oprettet endnu.</p>'),xt=l('<li class="p-3 flex items-center justify-between"><div><p class="font-medium"> </p> <p class="text-xs text-gray-500"> </p></div></li>'),ht=l('<ul class="divide-y divide-gray-200 dark:divide-gray-700 rounded border border-gray-200 dark:border-gray-700"></ul>'),_t=l('<div class="space-y-2"><h2 class="text-lg font-semibold">Eksisterende kapitler</h2> <!></div>'),bt=l('<section class="space-y-4"><h1 class="text-2xl font-semibold">Kapiteladministration</h1> <form class="space-y-2"><label class="block text-sm font-medium" for="chapter-title">Titel</label> <div class="flex flex-col gap-2 sm:flex-row sm:items-end"><input id="chapter-title" class="flex-1 rounded border border-gray-300 px-3 py-2" placeholder="Nyt kapitel" autocomplete="off"/> <button class="px-3 py-2 rounded bg-blue-600 text-white" type="submit">Opret kapitel</button></div></form> <!> <!></section>');function Nt(D,c){tt(c,!1);let u=dt(c,"showList",8,!0),v=k([]),x=k(""),h=k(""),C=k(!1),_=null;function N(){if(_)return _;const t=new SharedWorker(new URL(""+new URL("../workers/worker-D2xl7xYo.js",import.meta.url).href,import.meta.url),{type:"module"});return t.port.start(),_=ct(t.port),_}async function R(){if(u()){o(C,!0);try{o(v,await N().chapters.list())}finally{o(C,!1)}}}Z(()=>{R()});async function W(){const t=e(x).trim();if(!t){o(h,"Angiv en titel til kapitlet.");return}const a=Date.now(),f=t.toLowerCase().replace(/\s+/g,"-");await N().chapters.create({chapterId:f,title:t,createdAt:a,updatedAt:a}),o(h,"Nyt kapitel oprettet."),o(x,""),await R()}function Y(t){t.preventDefault(),W()}pt();var I=bt(),b=d(s(I),2),S=d(s(b),2),U=s(S);lt(U),at(2),r(S),r(b);var E=d(b,2);{var q=t=>{var a=mt(),f=s(a,!0);r(a),T(()=>j(f,e(h))),i(t,a)};w(E,t=>{e(h)&&t(q)})}var z=d(E,2);{var B=t=>{var a=_t(),f=d(s(a),2);{var F=n=>{var y=ut();i(n,y)},G=n=>{var y=rt(),H=st(y);{var J=p=>{var m=vt();i(p,m)},P=p=>{var m=ht();it(m,5,()=>e(v),ot,(Q,g)=>{var L=xt(),K=s(L),A=s(K),V=s(A,!0);r(A);var O=d(A,2),X=s(O);r(O),r(K),r(L),T(()=>{j(V,(e(g),M(()=>e(g).title))),j(X,`ID: ${e(g),M(()=>e(g).chapterId)??""}`)}),i(Q,L)}),r(m),i(p,m)};w(H,p=>{e(v),M(()=>e(v).length===0)?p(J):p(P,!1)},!0)}i(n,y)};w(f,n=>{e(C)?n(F):n(G,!1)})}r(a),i(t,a)};w(z,t=>{u()&&t(B)})}r(I),nt(U,()=>e(x),t=>o(x,t)),$("submit",b,ft(Y)),i(D,I),et()}export{Nt as C};
