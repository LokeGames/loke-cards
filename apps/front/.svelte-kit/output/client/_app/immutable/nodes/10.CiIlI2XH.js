import"../chunks/DsnmJJEf.js";import"../chunks/BnfXkLE3.js";import{p as P,f as m,t as f,e as o,g as e,a as b,c as Q,s as r,d as p,m as v,r as s,aj as N,b as X}from"../chunks/yF9IpEO4.js";import{o as Z,e as O,s as V}from"../chunks/CAKmdX18.js";import{e as W,i as Y}from"../chunks/BW16Smnj.js";import{r as $}from"../chunks/4O88iP2y.js";import{b as q}from"../chunks/jNOg69iZ.js";import{b as z}from"../chunks/D2rwkULN.js";import{i as ee}from"../chunks/CiABMiT9.js";import{w as te}from"../chunks/CybAjIvC.js";import{G as ae}from"../chunks/Dl6PWQl6.js";var re=m("<option> </option>"),oe=m("<option> </option>"),se=m('<div class="flex flex-col gap-2 p-2 bg-gray-100 dark:bg-gray-800 rounded"><div class="flex gap-2 items-end"><div><label class="block text-xs" for="gc-scene-title">Scene Title</label> <input id="gc-scene-title" class="rounded border px-2 py-1" placeholder="Title"/></div> <div><label class="block text-xs" for="gc-scene-id">Scene ID</label> <input id="gc-scene-id" class="rounded border px-2 py-1" placeholder="Optional"/></div> <button class="px-2 py-1 rounded bg-blue-600 text-white" data-testid="gc-create-scene">Create Scene</button></div> <div class="flex gap-2 items-end"><div><label class="block text-xs" for="gc-src">Source</label> <select id="gc-src" class="rounded border px-2 py-1" data-testid="gc-src"><option>Select…</option><!></select></div> <div><label class="block text-xs" for="gc-dst">Target</label> <select id="gc-dst" class="rounded border px-2 py-1" data-testid="gc-dst"><option>Select…</option><!></select></div> <button class="px-2 py-1 rounded bg-green-600 text-white" data-testid="gc-create-link">Create Link</button></div></div>');function ie(g,u){P(u,!1);let n=v([]),c=v(""),l=v(""),_=v(""),x=v("");async function w(){const t=new SharedWorker(new URL(""+new URL("../workers/worker-D2xl7xYo.js",import.meta.url).href,import.meta.url),{type:"module"});return t.port.start(),te(t.port)}async function j(){const t=await w();p(n,await t.cards.list())}Z(j);async function B(){const t=await w(),i=Date.now(),a={sceneId:e(x)||e(_).toLowerCase().replace(/\s+/g,"-"),chapterId:"ch-1",title:e(_)||"New Scene",createdAt:i,updatedAt:i};await t.cards.create(a),await j()}async function E(){if(!e(c)||!e(l))return;await(await w()).graph.createLink(e(c),e(l))}ee();var h=se(),k=o(h),y=o(k),R=r(o(y),2);$(R),s(y);var I=r(y,2),U=r(o(I),2);$(U),s(I);var F=r(I,2);s(k);var M=r(k,2),S=o(M),L=r(o(S),2);f(()=>{e(c),N(()=>{e(n)})});var G=o(L);G.value=G.__value="";var H=r(G);W(H,1,()=>e(n),Y,(t,i)=>{var a=re(),D=o(a,!0);s(a);var d={};f(()=>{V(D,e(i).sceneId),d!==(d=e(i).sceneId)&&(a.value=(a.__value=e(i).sceneId)??"")}),b(t,a)}),s(L),s(S);var C=r(S,2),T=r(o(C),2);f(()=>{e(l),N(()=>{e(n)})});var A=o(T);A.value=A.__value="";var J=r(A);W(J,1,()=>e(n),Y,(t,i)=>{var a=oe(),D=o(a,!0);s(a);var d={};f(()=>{V(D,e(i).sceneId),d!==(d=e(i).sceneId)&&(a.value=(a.__value=e(i).sceneId)??"")}),b(t,a)}),s(T),s(C);var K=r(C,2);s(M),s(h),q(R,()=>e(_),t=>p(_,t)),q(U,()=>e(x),t=>p(x,t)),O("click",F,B),z(L,()=>e(c),t=>p(c,t)),z(T,()=>e(l),t=>p(l,t)),O("click",K,E),b(g,h),Q()}var ne=m('<h2 class="text-xl font-semibold">Global Graph</h2> <!> <!>',1);function xe(g){var u=ne(),n=r(X(u),2);ie(n,{});var c=r(n,2);ae(c,{}),b(g,u)}export{xe as component};
